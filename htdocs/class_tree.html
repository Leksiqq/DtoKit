<!DOCTYPE html>
<html>
    <body>
        <h2>Дерево класса</h2>

        <p class="definition">
            <b>Деревом класса</b> из предметной области будем называть связный ациклический граф (собственно, дерево), корнем которого является рассматриваемый класс,
            узлами - агрегированные классы из предметной области, листьями - открытые для записи свойства.
        </p>
        <p>
            Рассмотрим пример из предметной области, связанной с расписанием движения морских судов.
        </p>
        <p>
            Для краткости приведём только основные свойства сущностей, хотя они могут содержать и методы, но в данном контексте это неважно.
        </p>
        <table>
            <tr>
                <td>
                    <script src="https://gist.github.com/Leksiqq/211f5ebc4891cbdbb5c40818d9693bd4.js"></script>
                </td>
            </tr>
            <tr>
                <td>
                    <script src="https://gist.github.com/Leksiqq/cb8d4965b5194be27f62a085f2f60f83.js"></script>
                </td>
            </tr>
            <tr>
                <td>
                    <script src="https://gist.github.com/Leksiqq/95998716ee1cb4300b9a2bf7b7680c40.js"></script>
                </td>
            </tr>
            <tr>
                <td>
                    <script src="https://gist.github.com/Leksiqq/39fdf7e304220cb9907d856d3bf7ea97.js"></script>
                </td>
            </tr>
            <tr>
                <td>
                    <script src="https://gist.github.com/Leksiqq/7fbfa0734962e83d6361fb46bf0df92a.js"></script>
                </td>
            </tr>
        </table>
        <p>
            Для класса <code>ShipCall</code> имеем следующее дерево:
        </p>
        <img src="class_tree.jpg"/>
        <p>
            Теперь мы можем разработать интерфейсы только для чтения, которые покрывают все свойства в наших классах предметной области и в рамках предметной области, то есть ключи БД нигде фигурировать не будут. 
            Заставим классы их реализовать явно, если потребуется, это не добавит никакой логики. 
            Мы будем редактировать классы, но это ни на что не повлияет, так как новые свойства будут лишь "псевдонимами" свойств класса. 
        </p>
        <p>
            Также сразу учтём, что нам нужно будет неявно всё же использовать ключевые свойства на уровнях загрузки и передачи, хотя бы для запросов клиента к конкретным объектам на сервере 
            (дальше увидим, что не только для этого), поэтому пометим такие свойства специальным атрибутом <code>[Key]</code>.
        </p>
        <p>
            Вот что получилось:
        </p>
        <table>
            <tr>
                <td valign="top">
                    <script src="https://gist.github.com/Leksiqq/43c3b849d6213c5dc841add8a13c371f.js"></script>
                </td>
                <td valign="top">
                    <script src="https://gist.github.com/Leksiqq/d7cddf8a4c54d9ebdb850a6a9440b2de.js"></script>
                </td>
            </tr>
            <tr>
                <td valign="top">
                    <script src="https://gist.github.com/Leksiqq/51359b051fafdda7c7f360d64327cc77.js"></script>
                </td>
                <td valign="top">
                    <script src="https://gist.github.com/Leksiqq/3595db898dcab215f8cb1d0cf28e9443.js"></script>
                </td>
            </tr>
            <tr>
                <td valign="top">
                    <script src="https://gist.github.com/Leksiqq/c2d9cb3c4ed84130b778f2c54ba051e7.js"></script>
                </td>
                <td valign="top">
                    <script src="https://gist.github.com/Leksiqq/17341a04e2f6d1a917911327ce1b1ca4.js"></script>
                </td>
            </tr>
            <tr>
                <td valign="top">
                    <script src="https://gist.github.com/Leksiqq/707e93d8da196fb956a5343379768fd1.js"></script>
                </td>
                <td valign="top">
                    <script src="https://gist.github.com/Leksiqq/207e4cf33c0e0e4c3f60e2ba8d1705fb.js"></script>
                </td>
            </tr>
            <tr>
                <td valign="top">
                    <script src="https://gist.github.com/Leksiqq/c999e07c6071db04031ea33debf48318.js"></script>
                </td>
                <td valign="top">
                    <script src="https://gist.github.com/Leksiqq/6b5f64f73a1f6e5a6805e1fd40742da9.js"></script>
                </td>
            </tr>
        </table>

    </body>
</html>
